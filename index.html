<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Pyquebec by sebasmonia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Pyquebec</h1>
      <h2 class="project-tagline">A Python package to create quick SQL queries from the console.</h2>
      <a href="https://github.com/sebasmonia/pyquebec" class="btn">View on GitHub</a>
      <a href="https://github.com/sebasmonia/pyquebec/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sebasmonia/pyquebec/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>Helper to consume a database from the REPL.</p>

<p>Dependencies:</p>

<ul>
<li>pypyodbc</li>
<li>tabulate</li>
<li>Configuration file dbhelper.ini. A template is included in the source.</li>
</ul>

<p>Sample:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-k">from</span> pyquebec <span class="pl-k">import</span> database
<span class="pl-k">&gt;&gt;&gt;</span> <span class="pl-k">from</span> pyquebec <span class="pl-k">import</span> dataformatters <span class="pl-k">as</span> qf
<span class="pl-k">&gt;&gt;&gt;</span> master <span class="pl-k">=</span> database.connect(<span class="pl-s"><span class="pl-pds">'</span>master<span class="pl-pds">'</span></span>)  <span class="pl-c"># Connection string name from the ini file, or a entire conn string</span>
<span class="pl-k">&gt;&gt;&gt;</span> master.dbo.sp <span class="pl-k">&lt;</span>TAB KEY<span class="pl-k">&gt;</span>
db.dbo.spt_fallback_db  db.dbo.spt_fallback_usg db.dbo.spt_values
db.dbo.spt_fallback_dev db.dbo.spt_monitor
<span class="pl-k">&gt;&gt;&gt;</span>result <span class="pl-k">=</span> db.dbo.spt_monitor.From().go()
<span class="pl-k">&gt;&gt;&gt;</span> qf.to_html(result)
Creating <span class="pl-k">and</span> opening temp <span class="pl-c1">file</span> C:\<span class="pl-ii">Users\smonia\AppData\Local\Temp\tmpn3g43ppp.htm</span>
<span class="pl-k">&gt;&gt;&gt;</span> qf.to_csv(result)
Creating <span class="pl-k">and</span> opening temp <span class="pl-c1">file</span> C:\<span class="pl-ii">Users\smonia\AppData\Local\Temp\tmpe68shxd9.csv</span>
<span class="pl-k">&gt;&gt;&gt;</span> result[<span class="pl-c1">0</span>]
row(<span class="pl-smi">lastrun</span><span class="pl-k">=</span>datetime.datetime(<span class="pl-c1">2015</span>, <span class="pl-c1">5</span>, <span class="pl-c1">13</span>, <span class="pl-c1">23</span>, <span class="pl-c1">34</span>, <span class="pl-c1">58</span>, <span class="pl-c1">77000</span>), <span class="pl-smi">cpu_busy</span><span class="pl-k">=</span><span class="pl-c1">59</span>, <span class="pl-smi">io_busy</span><span class="pl-k">=</span><span class="pl-c1">29</span>, 
<span class="pl-smi">idle</span><span class="pl-k">=</span><span class="pl-c1">288</span>, <span class="pl-smi">pack_received</span><span class="pl-k">=</span><span class="pl-c1">0</span>, <span class="pl-smi">pack_sent</span><span class="pl-k">=</span><span class="pl-c1">0</span>, <span class="pl-smi">connections</span><span class="pl-k">=</span><span class="pl-c1">12</span>, <span class="pl-smi">pack_errors</span><span class="pl-k">=</span><span class="pl-c1">0</span>, <span class="pl-smi">total_read</span><span class="pl-k">=</span><span class="pl-c1">0</span>, <span class="pl-smi">total_write</span><span class="pl-k">=</span><span class="pl-c1">0</span>, <span class="pl-smi">total_errors</span><span class="pl-k">=</span><span class="pl-c1">0</span>)</pre></div>

<p>Pypyodbc returns tuples by default. This library converts them to namedtuples for increased readability and to make it easier to keep playing with the data using filter, map, etc.</p>

<p>The formatters work with iterables using lists, tuples, dictionaries and namedtuples as rows. There's a third option that uses tabulate for output to_console().
Both HTML and CSV options create a temp file and use os.startfile (in Windows you get the default browser and -usually- Excel).</p>

<p>Roadmap (help/guidance appreciated!): </p>

<ul>
<li>Other alternatives in PyPI didn't support SQL Server. This one was tested using SQL Server, but should work with other RDBMS with minimal effort. The final aim is to support as many as possible (all?).</li>
<li>The API for querying might need a few tweaks. Suggestions are welcome.</li>
<li>Decide on other SQL features to support beyond basic querying. UPDATES, INSERTS, GROUP BY, etc, would it make sense? Would this make supporting other products more difficult?</li>
<li>Needs unittest!</li>
</ul>

<p>Contributors:
Sebastián Monía - <a href="https://github.com/sebasmonia" class="user-mention">@sebasmonia</a>
Fernando Antivero - <a href="https://github.com/ferantivero" class="user-mention">@ferantivero</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sebasmonia/pyquebec">Pyquebec</a> is maintained by <a href="https://github.com/sebasmonia">sebasmonia</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
